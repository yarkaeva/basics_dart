# Async/await

 Операторы `async` и `await` облегчают написание асинхронного кода. Применение `async-await` позволяет уйти от прямого использования Future API, в частности, его методов then и catchError.

В **примере 1** -  как бы написали код с помощью Future API без async и await:

```dart
void main() {
  print('start');
  exampleFutureApi();
  print('end');
}

// ассинхронная функция
Future<int> sum(int a, int b) {
  return Future.sync(() => a + b);
}

exampleFutureApi() {
  final a = sum(1, 4);
  // код ниже это не работает, тк функция асинхронная и еще нет результата
  // final b = sum(a, 9);
  // print(b);
  // final c = sum(b, 9);
  // print(c);

  // можно было бы решить вот так
  a.then((a) {
    print(a);
    final b = sum(a, 9);
    b.then((b) {
      print(b);
      final c = sum(b, a);
      c.then((c) => print(c));
    });
  });
}
```

А можно решить вот так.
Во **примере 2** перепишем тот же код с использованием async-await:

```dart
void main() {
  print('start');
  exampleAsync();
  print('end');
}

// ассинхронная функция
Future<int> sum(int a, int b) {
  return Future.sync(() => a + b);
}

Future<void> exampleAsync() async {
  final a = await sum(1, 4);
  final b = await sum(a, 9);
  print(b);
  final c = await sum(b, a);
  print(c);
}
```
Функция exampleAsync определена как асинхронная. Для этого после списка параметров функции указывается оператор `async`:
```dart 
Future<void> exampleAsync() async {
  ```
await ставим перед вызовом асинхронной функции.

**Асинхронная функция** - это такая функция, которая содержит как *минимум одну асинхронную операцию*(хотя также вместе с этим может содержать выполнять и синхронные операции). Асинхронная функция *выглядит как синхронная* за тем исключением, что она использует операторы `async` и `await`.

Асинхронная функция выполняет синхронно весь код, который идет до первого вызова выражения `await`. 

Выражение `await` представляет асинхронную операцию. **Асинхронная операция** - это такая операция, которая **не** блокирует выполнение других операций и позволяет им выполняться до своего завершения.

Выражение `await` обычно возвращает объект `Future`. Если возвращается объект другого типа, то он автоматически обертывается во `Future`. И этот объект, который хранится во `Future`, мы можем получить простой операцией присваивания.

Выражение `await` приостанавливает выполнение, пока нужный объект(в данном случае строка) не будет доступен. 

- Если функция использует `await`, то она обязательно должна быть определена с ключевым словом `async`. 
- Aсинхронная функция может содержать несколько выражений `await`. В этом случае они выполняется последовательно: когда завершится предыдущее, начинает выполняться последующее выражение `await`.